/*
* Copyright 2017 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
* http://www.nop-templates.com/t/licensinginfo
*/

function UpdateSummary() { var e = $("#SchedulePatternType").val(), t = $("#SchedulePatternType option:selected").text().toLowerCase(), a = sevenSpikesCore.getHiddenValFromDom("#SchedulePatternFromTime"), n = sevenSpikesCore.getHiddenValFromDom("#SchedulePatternToTime"), o = sevenSpikesCore.getHiddenValFromDom("#EntityFromDate"), r = sevenSpikesCore.getHiddenValFromDom("#EntityToDate"), d = sevenSpikesCore.getHiddenValFromDom("#ExactDayValue"), i = sevenSpikesCore.getHiddenValFromDom("#EveryMonthFromDayValue"), c = sevenSpikesCore.getHiddenValFromDom("#EveryMonthToDayValue"); 10 == e && (t = "every month from the " + NumberWithOrdinalIndicators(i) + " to the " + NumberWithOrdinalIndicators(c) + " day"), 25 == e && (t = "on the " + NumberWithOrdinalIndicators(d) + " day of every month"), "" == a && (a = "no starting time"), "" == n && (n = "no ending time"), "" == o && (o = "no starting date"), "" == r && (r = "no ending date"), $("#patternType").text(t), $("#timeFrom").text(a), $("#timeTo").text(n), $("#dateFrom").text(o), $("#dateTo").text(r) } function UpdateSchedule() { var e = sevenSpikesCore.getHiddenValFromDom("#update-schedule-url"), t = { id: sevenSpikesCore.getHiddenValFromDom("#schedule-id"), entityFromDate: sevenSpikesCore.getHiddenValFromDom("#EntityFromDate"), entityToDate: sevenSpikesCore.getHiddenValFromDom("#EntityToDate"), schedulePatternType: sevenSpikesCore.getHiddenValFromDom("#SchedulePatternType"), schedulePatternFromTime: sevenSpikesCore.getHiddenValFromDom("#SchedulePatternFromTime"), schedulePatternToTime: sevenSpikesCore.getHiddenValFromDom("#SchedulePatternToTime"), ExactDayValue: sevenSpikesCore.getHiddenValFromDom("#ExactDayValue"), everyMonthFromDayValue: sevenSpikesCore.getHiddenValFromDom("#EveryMonthFromDayValue"), everyMonthToDayValue: sevenSpikesCore.getHiddenValFromDom("#EveryMonthToDayValue") }; addAntiForgeryToken(t), $.ajax({ cache: !1, async: !1, type: "POST", data: t, url: e, success: function () { }, error: function (e, t, a) { alert("Updating schedule failed.") } }) } function DeleteSchedule() { var e = sevenSpikesCore.getHiddenValFromDom("#delete-schedule-url"), t = { id: sevenSpikesCore.getHiddenValFromDom("#schedule-id") }; addAntiForgeryToken(t), $.ajax({ cache: !1, async: !1, type: "POST", data: t, url: e, success: function () { }, error: function (e, t, a) { alert("Deleting schedule failed.") } }) } function ToggleDropdowns() { var e = $("#SchedulePatternType").val(); 10 == e ? ($(".exactDay").hide(), $(".everyMonth").show()) : 25 == e ? ($(".exactDay").show(), $(".everyMonth").hide()) : $(".exactDay, .everyMonth").hide() } function NumberWithOrdinalIndicators(e) { if (11 == e || 12 == e || 13 == e) return e + "th"; var t = ""; switch (e.toString().slice(-1)) { case "1": t = "st"; break; case "2": t = "nd"; break; case "3": t = "rd"; break; case "4": case "5": case "6": case "7": case "8": case "9": case "0": t = "th" }return e + t } $(document).ready(function () { $(".exactDayDropdown, .everyMonthDropdown, .schedulePatternTypeDropdown").kendoDropDownList(), $(".exactDayDropdown, .everyMonthDropdown").css("width", "80px"), $(".schedulePatternTypeDropdown").css("width", "200px"), $("#sceduleSummary span").css("font-weight", "800"), $(".exactDay, .everyMonth").hide(), $(".content-header > div.pull-right > .bg-blue").click(function () { var e = $(this).attr("name"); "save" != e && "save-continue" != e || UpdateSchedule() }), $('.form-actions > input[type="submit"]').click(function () { DeleteSchedule() }) }), $(window).load(function () { ToggleDropdowns(), UpdateSummary(), $("#SchedulePatternType").change(ToggleDropdowns).change(UpdateSummary), $("#EveryMonthFromDayValue").change(UpdateSummary), $("#EveryMonthToDayValue").change(UpdateSummary), $("#ExactDayValue").change(UpdateSummary), $("#EntityFromDate").data("kendoDatePicker").bind("change", UpdateSummary), $("#EntityToDate").data("kendoDatePicker").bind("change", UpdateSummary), $("#SchedulePatternFromTime").data("kendoTimePicker").bind("change", UpdateSummary), $("#SchedulePatternToTime").data("kendoTimePicker").bind("change", UpdateSummary) });