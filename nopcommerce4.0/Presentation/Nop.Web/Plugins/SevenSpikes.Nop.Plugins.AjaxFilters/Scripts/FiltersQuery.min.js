function setHistoryState() { var e = history.state ? history.state : {}; e.isPageAlreadyVisited = !0, history.replaceState(e, "", window.location) } var firstInit = !0, noHashQueryInitialized = !1, filterManager, isPageAlreadyVisited = !1, visiblePage, reverseInfiniteScroll; $.address.externalChange(function () { filterManager = new FiltersManager; var e = window.location.hash; e ? filterManager.requestProductsForSelectedFilters(null, null, null, e, void 0, void 0, void 0, isPageAlreadyVisited, visiblePage) : firstInit || (filterManager.requestProductsForSelectedFilters(null, null, null, "NO HASH QUERY", noHashQueryInitialized, void 0, void 0, isPageAlreadyVisited), noHashQueryInitialized = !noHashQueryInitialized), firstInit = !1 }), "undefined" != typeof ReverseInfiniteScroll && (reverseInfiniteScroll = new ReverseInfiniteScroll).init(), $(document).ready(function () { setHistoryState() }), $(document).on("nopAjaxFiltersFiltrationCompleteEvent", setHistoryState), window.onpopstate = function (e) { history.state && (isPageAlreadyVisited = ajaxFiltersHistory.state().isPageAlreadyVisited, visiblePage = ajaxFiltersHistory.state().visiblePage) };