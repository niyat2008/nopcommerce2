!function(a){a(document).ready(function(){function d(){var b=a("#small-searchterms_listbox").children().slice(0,c),d=0;if(b.length===c)for(var e=0;e<b.length;e++)d+=a(b[e]).outerHeight();d>0&&a("#small-searchterms-list").css("height",d)}var b=a(".instantSearchResourceElement");if(0!==b.length){(a("#instant-search-categories").length>0||a("#instant-search-manufacturers").length>0||a("#instant-search-vendors").length>0)&&(a(".search-box-text").addClass("narrow"),a(".store-search-box").addClass("with-caregory-search-enabled"));var c=parseInt(b.attr("data-numberOfVisibleProducts"));a("#small-searchterms").kendoAutoComplete({highlightFirst:"true"===b.attr("data-highlightFirstFoundElement"),minLength:parseInt(b.attr("data-minKeywordLength"))||0,dataTextField:"ProductName",filter:"contains",popup:{appendTo:a("#small-search-box-form")},template:kendo.template(a("#instantSearchItemTemplate").html()),height:"auto",dataSource:new kendo.data.DataSource({serverFiltering:!0,requestStart:function(){a("#small-searchterms").addClass("instant-search-busy")},change:function(){a("#small-searchterms").removeClass("instant-search-busy")},transport:{read:b.attr("data-instantSearchUrl"),parameterMap:function(){return{q:a("#small-searchterms").val(),categoryId:a("#instant-search-categories").val(),manufacturerId:a("#instant-search-manufacturers").val(),vendorId:a("#instant-search-vendors").val()}}}}),change:function(){var b=a(".k-list").find(".k-state-selected"),c=b.find(".instant-search-item").attr("data-url");"undefined"==typeof c||setLocation(c)},dataBound:function(){a("#small-searchterms").data("kendoAutoComplete").list.parent(".k-animation-container").addClass("instantSearch"),(a("#instant-search-categories").length>0||a("#instant-search-manufacturers").length>0||a("#instant-search-vendors").length>0)&&a(".k-animation-container").addClass("resize"),d()}}),"false"===b.attr("data-highlightFirstFoundElement")&&a("#small-search-box-form").on("keydown",function(b){13===b.keyCode&&a(this).submit()}),a("#small-search-box-form").submit(function(c){var d=a("#instant-search-categories").val()||0,e=a("#instant-search-manufacturers").val()||0,f=a("#instant-search-vendors").val()||0,g=a("#small-searchterms").val();if(g){var h=b.attr("data-searchInProductDescriptions"),i=d>0,j=e>0,k=f>0,l=i||j||k||h;window.location.href=b.attr("data-searchPageUrl")+"?adv="+l+"&cid="+d+"&mid="+e+"&vid="+f+"&q="+encodeURIComponent(g)+"&sid="+b.attr("data-searchInProductDescriptions")+"&isc=true"}c.preventDefault()})}})}(jQuery);