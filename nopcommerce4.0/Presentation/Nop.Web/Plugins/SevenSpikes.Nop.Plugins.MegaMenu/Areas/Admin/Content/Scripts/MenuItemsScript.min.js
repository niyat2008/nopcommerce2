/*
* Copyright 2016 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
* http://www.nop-templates.com/t/licensinginfo
*/


var megaMenu;!function(e){var t={menuFocus:"%1$s. Menu item %2$d of %3$d.",moveDown:"Move down one",moveOutFrom:"Move out from under %s",moveToTop:"Move to the top",moveUnder:"Move under %s",moveUp:"Move up one",oneThemeLocationNoMenus:"",outFrom:"Out from under %s",subMenuFocus:"%1$s. Sub item number %2$d under %3$s.",under:"Under %s"},i={Categories:"0",Manufacturers:"20",Vendors:"30",Topics:"50",ProductTags:"85",ColumnsLayout:"150",RowsLayout:"151",Column:"155",Row:"156",Picture:"160",CustomLink:"200"},n={Simple:"0",WithPictures:"5",List:"10"},s=megaMenu={options:{menuItemDepthPerLevel:30,globalMaxDepth:11,sortableItems:"> *",targetTolerance:0},menuList:void 0,targetList:void 0,menusChanged:!1,isRTL:void 0,negateIfRTL:void 0,isLoaded:!1,init:function(){this.isLoaded=!0,s.menuList=e("#menu-to-edit"),s.targetList=s.menuList,s.isRTL="true"===e(".menu-items-administration").attr("data-isRtl"),s.negateIfRTL=s.isRTL?-1:1,this.jQueryExtensions(),this.attachMenuEditListeners(),this.attachUnsavedChangesListener(),s.menuList.length&&this.initSortables(),this.initAccessibility(),this.initPreviewing(),this.refreshColumnLayouts(),this.refreshRowLayouts(),this.denoteColumns(),this.denoteRows(),this.refreshColumns()},jQueryExtensions:function(){e.fn.extend({getAllColumnLayoutsInsideElement:function(){return this.has("span.item-title:first > span[data-itemtype="+i.ColumnsLayout+"]")},getAllRowLayoutsInsideElement:function(){return this.has("span.item-title:first > span[data-itemtype="+i.RowsLayout+"]")},getAllColumnsInsideElement:function(){return this.has("span.item-title:first > span[data-itemtype="+i.Column+"]")},getAllRowsInsideElement:function(){return this.has("span.item-title:first > span[data-itemtype="+i.Row+"]")},isMenuItemOfType:function(e){return this.has("span.item-title:first > span[data-itemtype="+e+"]").length>0},isColumnsLayout:function(){return this.isMenuItemOfType(i.ColumnsLayout)},isRowsLayout:function(){return this.isMenuItemOfType(i.RowsLayout)},isColumn:function(){return this.isMenuItemOfType(i.Column)},isRow:function(){return this.isMenuItemOfType(i.Row)},isPicture:function(){return this.isMenuItemOfType(i.Picture)},isCategories:function(){return this.isMenuItemOfType(i.Categories)},isManufacturers:function(){return this.isMenuItemOfType(i.Manufacturers)},isVendors:function(){return this.isMenuItemOfType(i.Vendors)},isTopics:function(){return this.isMenuItemOfType(i.Topics)},isProductTags:function(){return this.isMenuItemOfType(i.ProductTags)},menuItemDepth:function(){var e=s.isRTL?this.eq(0).css("margin-right"):this.eq(0).css("margin-left");return s.pxToDepth(e&&-1!=e.indexOf("px")?e.slice(0,-2):0)},updateDepthClass:function(t,i){return this.each(function(){var n=e(this);i=i||n.menuItemDepth(),e(this).removeClass("menu-item-depth-"+i).addClass("menu-item-depth-"+t)})},shiftDepthClass:function(t){return this.each(function(){var i=e(this).menuItemDepth();e(this).removeClass("menu-item-depth-"+i).addClass("menu-item-depth-"+(i+t))})},childMenuItems:function(){var t=e();return this.each(function(){for(var i=e(this),n=i.menuItemDepth(),s=i.next(".menu-item");s.length&&s.menuItemDepth()>n;)t=t.add(s),s=s.next(".menu-item")}),t},shiftHorizontally:function(t){return this.each(function(){var i=e(this),n=i.menuItemDepth(),s=n+t;i.moveHorizontally(s,n)})},moveHorizontally:function(t,i){return this.each(function(){var n=e(this),s=n.childMenuItems(),a=t-i,o=n.find(".is-submenu");n.updateDepthClass(t,i).updateParentMenuItemDBId(),s&&s.each(function(){var t=e(this),i=t.menuItemDepth(),n=i+a;t.updateDepthClass(n,i).updateParentMenuItemDBId()}),0===t?o.hide():o.show()})},updateParentMenuItemDBId:function(){return this.each(function(){var t=e(this),i=t.find(".menu-item-data-parent-id"),n=parseInt(t.menuItemDepth(),10),s=n-1,a=t.prevAll(".menu-item-depth-"+s).first();0===n?i.val(0):i.val(a.find(".menu-item-data-db-id").val())})},getItemData:function(e,t){e=e||"menu-item";var i,n={},s=["menu-item-db-id","menu-item-object-id","menu-item-object","menu-item-parent-id","menu-item-position","menu-item-type","menu-item-title","menu-item-url","menu-item-description","menu-item-attr-title","menu-item-target","menu-item-classes","menu-item-xfn"];return t||"menu-item"!=e||(t=this.find(".menu-item-data-db-id").val()),t?(this.find("input").each(function(){var a;for(i=s.length;i--;)"menu-item"==e?a=s[i]+"["+t+"]":"add-menu-item"==e&&(a="menu-item["+t+"]["+s[i]+"]"),this.name&&a==this.name&&(n[s[i]]=this.value)}),n):n}})},countMenuItems:function(t){return e(".menu-item-depth-"+t).length},moveMenuItem:function(t,i){var n,a,o,r=e("#menu-to-edit li"),u=r.length,m=t.parents("li.menu-item"),l=m.childMenuItems(),d=m.getItemData(),c=parseInt(m.menuItemDepth(),10),h=parseInt(m.index(),10),f=m.next(),p=f.childMenuItems(),v=parseInt(f.menuItemDepth(),10)+1,g=m.prev(),y=parseInt(g.menuItemDepth(),10),I=g.getItemData()["menu-item-db-id"];switch(i){case"up":if(a=h-1,0===h)break;0===a&&0!==c&&m.moveHorizontally(0,c),0!==y&&m.moveHorizontally(y,c),l?(n=m.add(l)).detach().insertBefore(r.eq(a)).updateParentMenuItemDBId():m.detach().insertBefore(r.eq(a)).updateParentMenuItemDBId();break;case"down":if(l){if(n=m.add(l),f=r.eq(n.length+h),(p=0!==f.childMenuItems().length)&&(o=parseInt(f.menuItemDepth(),10)+1,m.moveHorizontally(o,c)),u===h+n.length)break;n.detach().insertAfter(r.eq(h+n.length)).updateParentMenuItemDBId()}else{if(0!==p.length&&m.moveHorizontally(v,c),u===h+1)break;m.detach().insertAfter(r.eq(h+1)).updateParentMenuItemDBId()}break;case"top":if(0===h)break;l?(n=m.add(l)).detach().insertBefore(r.eq(0)).updateParentMenuItemDBId():m.detach().insertBefore(r.eq(0)).updateParentMenuItemDBId();break;case"left":if(0===c)break;m.shiftHorizontally(-1);break;case"right":if(0===h)break;if(d["menu-item-parent-id"]===I)break;m.shiftHorizontally(1)}t.focus(),s.registerChange(),s.refreshKeyboardAccessibility(),s.refreshAdvancedAccessibility()},initAccessibility:function(){var t=e("#menu-to-edit");s.refreshKeyboardAccessibility(),s.refreshAdvancedAccessibility(),t.on("mouseenter.refreshAccessibility focus.refreshAccessibility touchstart.refreshAccessibility",".menu-item",function(){s.refreshAdvancedAccessibilityOfItem(e(this).find("a.item-edit"))}),t.on("click","a.item-edit",function(){s.refreshAdvancedAccessibilityOfItem(e(this))}),t.on("click",".menus-move",function(t){var i=e(this).data("dir");void 0!==i&&s.moveMenuItem(e(this).parents("li.menu-item").find("a.item-edit"),i),t.preventDefault()})},refreshAdvancedAccessibilityOfItem:function(i){if(!0===e(i).data("needs_accessibility_refresh")){var n,s,a,o,r,u,m,l,d,c=e(i),h=c.closest("li.menu-item").first(),f=h.menuItemDepth(),p=0===f,v=c.closest(".menu-item-handle").find(".menu-item-title").text(),g=parseInt(h.index(),10),y=p?f:parseInt(f-1,10),I=h.prevAll(".menu-item-depth-"+y).first().find(".menu-item-title").text(),C=h.prevAll(".menu-item-depth-"+f).first().find(".menu-item-title").text(),b=e("#menu-to-edit li").length,L=h.nextAll(".menu-item-depth-"+f).length;h.find(".field-move").toggle(b>1),0!==g&&(n=h.find(".menus-move-up")).attr("aria-label",t.moveUp).css("display","inline"),0!==g&&p&&(n=h.find(".menus-move-top")).attr("aria-label",t.moveToTop).css("display","inline"),g+1!==b&&0!==g&&(n=h.find(".menus-move-down")).attr("aria-label",t.moveDown).css("display","inline"),0===g&&0!==L&&(n=h.find(".menus-move-down")).attr("aria-label",t.moveDown).css("display","inline"),p||(n=h.find(".menus-move-left"),s=t.outFrom.replace("%s",I),n.attr("aria-label",t.moveOutFrom.replace("%s",I)).text(s).css("display","inline")),0!==g&&h.find(".menu-item-data-parent-id").val()!==h.prev().find(".menu-item-data-db-id").val()&&(n=h.find(".menus-move-right"),s=t.under.replace("%s",C),n.attr("aria-label",t.moveUnder.replace("%s",C)).text(s).css("display","inline")),p?(o=(a=e(".menu-item-depth-0")).index(h)+1,b=a.length,r=t.menuFocus.replace("%1$s",v).replace("%2$d",o).replace("%3$d",b)):(m=(u=h.prevAll(".menu-item-depth-"+parseInt(f-1,10)).first()).find(".menu-item-data-db-id").val(),l=u.find(".menu-item-title").text(),d=e('.menu-item .menu-item-data-parent-id[value="'+m+'"]'),o=e(d.parents(".menu-item").get().reverse()).index(h)+1,r=t.subMenuFocus.replace("%1$s",v).replace("%2$d",o).replace("%3$s",l)),c.attr("aria-label",r).text(r),c.data("needs_accessibility_refresh",!1)}},refreshAdvancedAccessibility:function(){e(".menu-item-settings .field-move a").hide(),e("a.item-edit").data("needs_accessibility_refresh",!0),e(".menu-item-edit-active a.item-edit").each(function(){s.refreshAdvancedAccessibilityOfItem(this)})},refreshKeyboardAccessibility:function(){e("a.item-edit").off("focus").on("focus",function(){e(this).off("keydown").on("keydown",function(t){var i,n=e(this),a=n.parents("li.menu-item").getItemData();if((37==t.which||38==t.which||39==t.which||40==t.which)&&(n.off("keydown"),1!==e("#menu-to-edit li").length)){switch(i={38:"up",40:"down",37:"left",39:"right"},e("body").hasClass("rtl")&&(i={38:"up",40:"down",39:"left",37:"right"}),i[t.which]){case"up":s.moveMenuItem(n,"up");break;case"down":s.moveMenuItem(n,"down");break;case"left":s.moveMenuItem(n,"left");break;case"right":s.moveMenuItem(n,"right")}return e("#edit-"+a["menu-item-db-id"]).focus(),!1}})})},initPreviewing:function(){e("#menu-to-edit").on("change input setTitle",".edit-menu-item-title:not(.localized)",function(t){var i,n,a,o=e(t.currentTarget);if(i=o.closest(".menu-item"),a=i.find(".menu-item-title"),n=o.val())a.text(n).removeClass("no-title");else{var r=e("#mega-menu-info").attr("data-noLabel");a.text(r).addClass("no-title")}i.isColumnsLayout()?(s.refreshColumnLayouts(),s.refreshColumns()):i.isRowsLayout()?s.refreshRowLayouts():i.isColumn()&&s.refreshColumns()})},initSortables:function(){function t(e){var t;d=e.placeholder.prev(".menu-item"),c=e.placeholder.next(".menu-item"),d[0]==e.item[0]&&(d=d.prev(".menu-item")),c[0]==e.item[0]&&(c=c.next(".menu-item")),h=d.length?d.offset().top+d.height():0,f=c.length?c.offset().top+c.height()/3:0,m=c.length?c.menuItemDepth():0,l=d.length?(t=d.menuItemDepth()+1)>s.options.globalMaxDepth?s.options.globalMaxDepth:t:0}function a(e,t){e.placeholder.updateDepthClass(t,b),b=t}function o(t){var i,n=M;if(0!==t){if(t>0)(i=g+t)>M&&(n=i);else if(t<0&&g==M)for(;!e(".menu-item-depth-"+n,s.menuList).length&&n>0;)n--;w.removeClass("menu-max-depth-"+M).addClass("menu-max-depth-"+n),M=n}}var r,u,m,l,d,c,h,f,p,v,g,y=!0,I=[n.WithPictures,n.List],C=[i.Categories,i.Manufacturers,i.Vendors],b=0,L=s.menuList.offset().left,w=e("body"),M=function(){if(!w[0].className)return 0;var e=w[0].className.match(/menu-max-depth-(\d+)/);return e&&e[1]?parseInt(e[1],10):0}(),A=function(t,i,n){if(t.isCategories()||t.isManufacturers()||t.isVendors()||t.isTopics()||t.isProductTags()){if(i.isColumn())return!1;if(0===n)return!1;var s=t.find(".item-type").attr("data-itemtype"),a=t.find(".edit-menu-item-entityId").val(),o=t.find(".edit-menu-item-template").val();if("0"===a&&(t.isCategories()||t.isTopics()||t.isProductTags())||-1!==C.indexOf(s)&&-1!==I.indexOf(o))return r=e("#mega-menu-info").attr("data-invalidNesting-templateBasedMenuItems"),!0}if(i.isCategories()||i.isManufacturers()||i.isVendors()||i.isTopics()||i.isProductTags()){var u=i.find(".item-type").attr("data-itemtype"),m=i.find(".edit-menu-item-entityId").val(),l=i.find(".edit-menu-item-template").val();if("0"===m&&(i.isCategories()||i.isTopics()||i.isProductTags())||-1!==C.indexOf(u)&&-1!==I.indexOf(l))return r=e("#mega-menu-info").attr("data-invalidNesting-templateBasedMenuItems"),!0}return!1},T=function(t,i){var n;return t.isPicture()?((n=!i.isColumn())&&(r=e("#mega-menu-info").attr("data-invalidNesting-picture-asMovingItem")),n):!!i.isPicture()&&(r=e("#mega-menu-info").attr("data-invalidNesting-picture-asParentItem"),!0)},x=function(t,i,n){var s;return t.isColumn()?((s=!(i.isColumnsLayout()||i.isRow()&&n.isRowsLayout()))&&(r=e("#mega-menu-info").attr("data-invalidNesting-column-asMovingItem")),s):!!i.isColumn()&&((s=n.isColumnsLayout()&&!t.isRow()||t.isColumnsLayout()||t.isRowsLayout())&&(r=e("#mega-menu-info").attr("data-invalidNesting-column-asParentItem")),s)},D=function(t,i,n){var s;return t.isRow()?((s=!(i.isRowsLayout()||i.isColumn()&&n.isColumnsLayout()))&&(r=e("#mega-menu-info").attr("data-invalidNesting-row-asMovingItem")),s):!!i.isRow()&&((s=n.isRowsLayout()&&!t.isColumn()||t.isColumnsLayout()||t.isRowsLayout())&&(r=e("#mega-menu-info").attr("data-invalidNesting-row-asParentItem")),s)},R=function(t,i){var n;return t.isColumnsLayout()?((n=i.length>0)&&(r=e("#mega-menu-info").attr("data-invalidNesting-columnsLayout-asMovingItem")),n):!!i.isColumnsLayout()&&((n=!t.isColumn())&&(r=e("#mega-menu-info").attr("data-invalidNesting-columnsLayout-asParentItem")),n)},P=function(t,i){var n;return t.isRowsLayout()?((n=i.length>0)&&(r=e("#mega-menu-info").attr("data-invalidNesting-rowsLayout-asMovingItem")),n):!!i.isRowsLayout()&&((n=!t.isRow())&&(r=e("#mega-menu-info").attr("data-invalidNesting-rowsLayout-asParentItem")),n)},k=function(e,t){r="";var i=e.item,n=e.placeholder.prevAll(".menu-item-depth-"+(t-1)).first(),s=e.placeholder.prevAll(".menu-item-depth-"+(t-2)).first();return n.is(i)&&(n=i.prevAll(".menu-item-depth-"+(t-1)).first()),(s.is(i)||s.is(n))&&(s=i.prevAll(".menu-item-depth-"+(t-2)).first()),!!T(i,n)||(!!x(i,n,s)||(!!D(i,n,s)||(!!R(i,n)||(!!P(i,n)||!!A(i,n,t)))))},O=function(e,t){k(e,t)?(e.placeholder.css("border-color","#c00"),y=!1):e.placeholder.css("border-color",""),a(e,t)};0!==e("#menu-to-edit li").length&&e(".drag-instructions").show(),L+=s.isRTL?s.menuList.width():0,s.menuList.sortable({handle:".menu-item-handle",placeholder:"sortable-placeholder",items:s.options.sortableItems,start:function(i,n){var o,r,m,l;s.isRTL&&(n.item[0].style.right="auto"),v=n.item.children(".menu-item-transport"),a(n,u=n.item.menuItemDepth()),m=(n.item.next()[0]==n.placeholder[0]?n.item.next():n.item).childMenuItems(),v.append(m),o=v.outerHeight(),o+=o>0?1*n.placeholder.css("margin-top").slice(0,-2):0,o+=n.helper.outerHeight(),p=o,o-=2,n.placeholder.height(o),g=u,m.each(function(){var t=e(this).menuItemDepth();g=t>g?t:g}),r=n.helper.find(".menu-item-handle").outerWidth(),r+=s.depthToPx(g-u),r-=2,n.placeholder.width(r),(l=n.placeholder.next(".menu-item")).css("margin-top",p+"px"),n.placeholder.detach(),e(this).sortable("refresh"),n.item.after(n.placeholder),l.css("margin-top",0),t(n)},stop:function(t,i){var n,a,m=b-u;if((n=v.children()).insertAfter(i.item),!y)return r=r||e("#mega-menu-info").attr("data-invalidNesting-invalidOperation"),e(".invalid-nesting").text(r),e(".invalid-nesting").show(),setTimeout(function(){e(".invalid-nesting").fadeOut()},4e3),e(this).sortable("cancel"),void n.insertAfter(i.item);a=i.item.find(".item-title .is-submenu"),0<b?a.show():a.hide(),0!==m&&(i.item.updateDepthClass(b),n.shiftDepthClass(m),o(m)),s.registerChange(),i.item.updateParentMenuItemDBId(),i.item[0].style.top=0,s.isRTL&&(i.item[0].style.left="auto",i.item[0].style.right=0),s.refreshKeyboardAccessibility(),s.refreshAdvancedAccessibility(),i.item.isColumn()?s.denoteColumns():i.item.isRow()&&s.denoteRows()},change:function(e,i){i.placeholder.parent().hasClass("menu")||(d.length?d.after(i.placeholder):s.menuList.prepend(i.placeholder)),t(i)},sort:function(i,n){var a=n.helper.offset(),o=s.isRTL?a.left+n.helper.width():a.left,r=s.negateIfRTL*s.pxToDepth(o-L);r>l||a.top<h-s.options.targetTolerance?r=l:r<m&&(r=m),n.placeholder.css("border-color",""),y=!0,O(n,r),y&&f&&a.top+p>f&&(c.after(n.placeholder),t(n),e(this).sortable("refreshPositions"))}})},attachMenuEditListeners:function(){var t=this;e("#update-nav-menu").bind("click",function(e){if(e.target&&e.target.className){if(-1!=e.target.className.indexOf("item-edit"))return t.eventOnClickEditLink(e.target);if(-1!=e.target.className.indexOf("item-delete"))return t.eventOnClickMenuItemDelete(e.target)}}),e('#add-custom-links input[type="text"]').keypress(function(t){e("#customlinkdiv").removeClass("form-invalid"),13===t.keyCode&&(t.preventDefault(),e("#submit-customlinkdiv").click())})},addItemToMenu:function(t,i,n,a){n=n||function(){},a=a||function(){};var o=e(".menu-items-administration").attr("data-addMenuItemUrl"),r=i;addAntiForgeryToken(r),e.ajax({type:"POST",url:o,data:r}).done(function(t){var i=e("#menu-instructions");t=e.trim(t),n(t,r),e("li.pending").hide().fadeIn("slow"),e(".drag-instructions").show(),!i.hasClass("menu-instructions-inactive")&&i.siblings().length&&i.addClass("menu-instructions-inactive"),s.registerChange(),a()}).fail(function(e){t.append('<div class="error-message">'+e+"</div>")})},addMenuItemToBottom:function(t){e(t).appendTo(s.targetList),s.refreshKeyboardAccessibility(),s.refreshAdvancedAccessibility();var i=e(t).attr("data-menuItemId"),n=e("#menu-item-"+i);n.isColumnsLayout()?s.refreshColumnLayouts():n.isRowsLayout()&&s.refreshRowLayouts()},addMenuItemToTop:function(t){e(t).prependTo(s.targetList),s.refreshKeyboardAccessibility(),s.refreshAdvancedAccessibility();var i=e(t).attr("data-menuItemId"),n=e("#menu-item-"+i);n.isColumnsLayout()?s.refreshColumnLayouts():n.isRowsLayout()&&s.refreshRowLayouts()},addMenuItemToElement:function(t,i){var n=i.ParentMenuItemId,a=e("#menu-item-"+n);if(a.length>0){var o=a.childMenuItems();o.length>0?e(t).insertAfter(o.last()):e(t).insertAfter(a),s.refreshKeyboardAccessibility(),s.refreshAdvancedAccessibility();var r=e(t).attr("data-menuItemId"),u=e("#menu-item-"+r);u.isColumn()?(s.denoteColumns(),s.refreshColumns()):u.isRow()&&s.denoteRows()}},attachUnsavedChangesListener:function(){e("#menu-to-edit input, #menu-to-edit select").change(function(){s.registerChange()}),0!==e("#menu-to-edit").length?window.onbeforeunload=function(){if(s.menusChanged)return"The changes you made will be lost if you navigate away from this page."}:e("#menu-settings-column").find("input,select").end().find("a").attr("href","#").unbind("click")},registerChange:function(){s.menusChanged=!0},eventOnClickEditLink:function(t){var i,n,s=/#(.*)$/.exec(t.href);if(s&&s[1]&&(i=e("#"+s[1]),0!==(n=i.parent()).length))return n.hasClass("menu-item-edit-inactive")?(i.data("menu-item-data")||i.data("menu-item-data",i.getItemData()),i.slideDown("fast"),n.removeClass("menu-item-edit-inactive").addClass("menu-item-edit-active")):(i.slideUp("fast"),n.removeClass("menu-item-edit-active").addClass("menu-item-edit-inactive")),!1},eventOnClickMenuItemDelete:function(t){var i=parseInt(t.id.replace("menu-item-delete-",""),10),n=e("#menu-item-"+i),a=n.childMenuItems();if((n.isColumnsLayout()||n.isRowsLayout()||n.isColumn()||n.isRow())&&a.length>0){var o=e("#mega-menu-info").attr("data-confirmationWindow-button-removeAllItems"),r=e("#mega-menu-info").attr("data-confirmationWindow-button-cancel");e("#dialog-confirm").dialog({resizable:!1,draggable:!1,height:"auto",width:400,modal:!0,buttons:[{text:o,icons:{primary:"ui-icon-closethick"},click:function(){s.removeMenuItem(n),a.each(function(){s.removeMenuItem(e(this))}),e(this).dialog("close")}},{text:r,icons:{primary:"ui-icon-cancel"},click:function(){e(this).dialog("close")}}]})}else s.removeMenuItem(n);return!1},removeMenuItem:function(t){var i=t.childMenuItems();t.addClass("deleting").animate({opacity:0,height:0},350,function(){t.remove(),i.shiftDepthClass(-1).updateParentMenuItemDBId(),0===e("#menu-to-edit li").length&&(e(".drag-instructions").hide(),e("#menu-instructions").removeClass("menu-instructions-inactive")),s.refreshAdvancedAccessibility(),t.isColumnsLayout()?(s.refreshColumnLayouts(),s.refreshColumns()):t.isRowsLayout()?s.refreshRowLayouts():t.isColumn()?(s.denoteColumns(),s.refreshColumns()):t.isRow()&&s.denoteRows(),s.registerChange()})},depthToPx:function(e){return e*s.options.menuItemDepthPerLevel},pxToDepth:function(e){return Math.floor(e/s.options.menuItemDepthPerLevel)},refreshColumnLayouts:function(){var e=s.menuList.find("li").getAllColumnLayoutsInsideElement();s.refreshLayouts(".has-column-layouts",".no-column-layouts",e)},refreshRowLayouts:function(){var e=s.menuList.find("li").getAllRowLayoutsInsideElement();s.refreshLayouts(".has-row-layouts",".no-row-layouts",e)},refreshLayouts:function(t,i,n){n.length>0?(e(t).show(),e(i).hide(),e(t+" select").empty(),n.each(function(){var i=e(this).attr("data-menuitemid")||0,n=e(this).find(".menu-item-title").text()||e("#mega-menu-info").attr("data-noLabel");e(t+" select").append('<option value="'+i+'">'+n+"</option>")})):(e(t).hide(),e(i).show())},refreshColumns:function(){var t=[];if(s.menuList.find("li").getAllColumnLayoutsInsideElement().each(function(){var i=e(this),n=i.childMenuItems().getAllColumnsInsideElement();if(n.length>0){var s={title:i.find(".menu-item-title").text(),children:[]};n.each(function(){var t=e(this);s.children.push({id:t.attr("data-menuitemid")||0,title:t.find(".menu-item-title").text()+" "+t.find(".item-type").text()})}),t.push(s)}}),t.length>0){e(".has-columns").show(),e(".no-columns").hide(),e(".has-columns select").empty();for(var i=0;i<t.length;i++){var n=t[i],a=n.children,o=e("<optgroup>");o.attr("label",n.title);for(var r=0;r<a.length;r++){var u=a[r],m=e("<option></option>");m.val(u.id),m.text(u.title),o.append(m)}e(".has-columns select").append(o)}}else e(".has-columns").hide(),e(".no-columns").show()},denoteColumns:function(){s.menuList.find("li").getAllColumnLayoutsInsideElement().each(function(){e(this).childMenuItems().getAllColumnsInsideElement().each(function(t){var i=e(this).find(".edit-menu-item-title:not(.localized)");0===i.val().length&&i.trigger("setTitle"),e(this).find(".item-type .position").text("["+ ++t+"]")})})},denoteRows:function(){s.menuList.find("li").getAllRowLayoutsInsideElement().each(function(){e(this).childMenuItems().getAllRowsInsideElement().each(function(t){e(this).find(".edit-menu-item-title:not(.localized)").trigger("setTitle"),e(this).find(".item-type .position").text("["+ ++t+"]")})})}};e(document).ready(function(){var t=e('a[data-toggle="tab"][data-tab-name="tab-menu-items"]');"true"===t.attr("aria-expanded")||t.parent("li").hasClass("active")?megaMenu.init():t.one("shown.bs.tab",function(){megaMenu.init()}),e(".save-settings-button").on("click",function(){s.menusChanged=!1})})}(jQuery);