/*
* Copyright 2016 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
* http://www.nop-templates.com/t/licensinginfo
*/

function setRibbonType(a) { $(a).parents(".page-ribbon-settings").each(function (a, b) { var c = $(b).attr("data-ribbontype"); void 0 != c && "" != c && (ribbonType = c) }) } function removeRibbonPictureFromDom(a) { var b = getNoPlictureLableText(); if ("" != b) { var c = "<label>" + b + "</label>"; $(a).html(c) } } function removePictureId() { "category" == ribbonType && void 0 != $("#CategoryPageRibbon_PictureId") && $("#CategoryPageRibbon_PictureId").attr("value", 0), "product" == ribbonType && void 0 != $("#ProductPageRibbon_PictureId") && $("#ProductPageRibbon_PictureId").attr("value", 0) } function addAndDisplayRibbonPicturesGrid() { var a = $(".ribbonPicturesWindow").data("kendoWindow"); if (void 0 == a) { populateWindowPictureGrid(); var b = $(".ribbonPicturesWindow"); b.kendoWindow({ width: 650, modal: !0, animation: !1 }), a = $(".ribbonPicturesWindow").data("kendoWindow") } a.center(), $(".ribbonPicturesWindow").closest(".k-window").css("top", "70px"), a.open() } function addRibbonPicturesGrid() { var a = "body", b = '<div class="ribbonPicturesWindow"><div id="ribbon-pictures-grid"></div></div>'; $(a).prepend(b) } function populateWindowPictureGrid() { var a = getSetRibbonPictureUrl(); "" != a && ($("#ribbon-pictures-grid").kendoGrid({ dataSource: new kendo.data.DataSource({ transport: { read: { url: a, dataType: "json", type: "POST", data: addAntiForgeryToken } }, schema: { data: "Data", total: "Total" }, pageSize: 10, serverPaging: !0 }), selectable: "single", pageable: !0, columns: [{ field: "Id", filterable: !1 }, { field: "PictureUrl", template: "<img src='${ PictureUrl }' alt='${ Id }' />", width: 250 }, { field: "PictureHeight", filterable: !0 }, { field: "PictureWidth", filterable: !0 }] }), $("#ribbon-pictures-grid").data("kendoGrid").hideColumn("Id")) } function addPictureIdToTheMarkup(a, b) { "category" == ribbonType && void 0 != $("#CategoryPageRibbon_PictureId") && setPictureId("#CategoryPageRibbon_PictureId", a, b), "product" == ribbonType && void 0 != $("#ProductPageRibbon_PictureId") && setPictureId("#ProductPageRibbon_PictureId", a, b) } function setPictureId(a, b, c) { $(a).attr("value", b), $(".ribbonPicturesWindow").data("kendoWindow").close(), addPictureToDom(c, b), showDeleteRibbonPictureButton() } function showDeleteRibbonPictureButton() { var a = $(editRibbonPictureButtonElement).closest(".panel-group.page-ribbon").find(".remove-ribbon-picture"); void 0 != a && $(a).css("display", "inline-block") } function addPictureToDom(a, b) { var c = $(editRibbonPictureButtonElement); if (void 0 != c) { var d = c.closest(".panel-group").find(".ribbon-image"); if (void 0 != d) { var e = "<img src=" + a + " alt=" + b + " />"; d.html(e) } } } function getRibbonPictureId(a) { var b = $(a).attr("data-ribbonPictureId"); return void 0 == b || "" == b ? 0 : parseInt(b) || 0 } function getSetRibbonPictureUrl() { var a = $("#ribbon-data").attr("data-setRibbonPictureUrl"); return void 0 == a ? "" : a } function getNoPlictureLableText() { var a = $("#ribbon-data").attr("data-noPictureLabelText"); return void 0 == a ? "" : a } function getAddDeleteProductRibbonPictureUrl(a) { var b = $(a).attr("data-addDeleteProductRibbonPictureUrl"); return void 0 == b ? "" : b } function getEditPictureUrl(a) { var b = $(a).attr("data-editPictureUrl"); return void 0 == b || "" == b ? "" : b } var ribbonType = "", editRibbonPictureButtonElement = "", pageRibbonTableSelector = ".panel-group.page-ribbon"; $(document).ready(function () { addRibbonPicturesGrid(), $(pageRibbonTableSelector).each(function () { var a = $(this).find(".ribbon-image label"); void 0 != a && a.length > 0 && $(this).find(".remove-ribbon-picture").css("display", "none") }), $("div.ribbon-picture-buttons .edit-ribbon-picture").click(function () { var a = getEditPictureUrl(this); "" != a && (editRibbonPictureButtonElement = this, $(editRibbonPictureButtonElement).parents(".page-ribbon-settings").each(function (a, b) { var c = $(b).attr("data-ribbontype"); void 0 != c && "" != c && (ribbonType = c) }), addAndDisplayRibbonPicturesGrid()) }), $("div.ribbon-picture-buttons .remove-ribbon-picture").on("click", function () { var a = $(this).closest(".panel-group").find("div.ribbon-image"); if (void 0 != a) { var b = $(a).find("img"); void 0 != b && (setRibbonType(this), removePictureId(), removeRibbonPictureFromDom(a), $(this).css("display", "none")) } }), $(".manage-ribbon-pictures").click(function () { window.location.href = getAddDeleteProductRibbonPictureUrl(this) }), $("#ribbon-pictures-grid div img").livequery("click", function (a) { var b = $(this).attr("alt"); if (b) { var c = $(this).attr("src"); addPictureIdToTheMarkup(b, c) } }) });