/*
* Copyright 2018 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
* http://www.nop-templates.com/t/licensinginfo
*/

!function (t) {
    var a = t(window), e = t("#spc-slick-slider-settings"), o = e.attr("data-showitemsincarousel"), i = e.attr("data-slickcategorysettings"), s = e.attr("data-slickproductsettings"), d = e.attr("data-categoryresponsivebreakpoints"), r = e.attr("data-productresponsivebreakpoints"), c = function () {
        var e = a.scrollTop() + a.outerHeight(); t(".spc-products[notLoaded]")
            .each(function () { var a = t(this); a.offset().top < e && (a.removeAttr("notLoaded"), a.find(".tab:first").click()) }),
            t(".spc-categories[notLoaded]").each(function () { var a = t(this); a.offset().top < e && (a.removeAttr("notLoaded"), t.ajax({ url: a.attr("data-getCategoryGroupInfoUrl"), type: "POST", data: { categoryId: parseInt(a.attr("data-categoryGroupId")) || 0 } }).done(function (e) { a.html(e), a.find(".navigation .tab:first-of-type").removeAttr("notLoaded").addClass("active"), a.find(".category-products .product-grid:first-of-type").addClass("active"), n(a.find(".item-grid:first"), "category"), t.event.trigger({ type: "newProductsAddedToPageEvent" }) }).fail(function () { a.remove() })) }), 0 === t(".spc-products[notLoaded], .spc-categories[notLoaded]").length && a.off("scroll.smart-products")
    }; function n(a, e) { if ("true" == o && a.length && !a.hasClass("slick-initialized")) { var c = {}; try { c = "category" == e ? JSON.parse(i) : JSON.parse(s) } catch (t) { console.log("Invalid category/product collection settings value!") } try { c.responsive = "category" == e ? JSON.parse(d) : JSON.parse(r) } catch (t) { console.log("Invalid category/product breakpoints setting value!") } a.on("init", function () { t.event.trigger({ type: "newProductsAddedToPageEvent" }) }), a.slick(c) } } function l(a, e) { var o = t("img", a), i = o.length; 0 === i && e.find(".loading-overlay").fadeOut(), o.load(function () { --i <= 0 && e.find(".loading-overlay").fadeOut() }) } t(document).ready(function () {
        t(".spc-products .tab").off("click.smartproductcollections").on("click.smartproductcollections", function (a) { a.preventDefault(); var e = t(this), o = parseInt(e.attr("data-tabId")); if (!isNaN(o)) { var i = e.closest(".spc-products"); e.hasClass("loaded") ? (e.addClass("active").siblings(".tab").removeClass("active"), i.find('.spc-body .product-grid[data-tabId="' + o + '"]').addClass("active").siblings(".product-grid").removeClass("active")) : (e.addClass("loaded"), i.find(".loading-overlay").show(), t.ajax({ url: i.attr("data-getItemProductsUrl"), type: "POST", data: { id: o } }).done(function (a) { var s = i.find('.spc-body .product-grid[data-tabId="' + o + '"]'); s.find(".item-grid").html(a), e.addClass("active").siblings(".tab").removeClass("active"), s.addClass("active").siblings(".product-grid").removeClass("active"), l(s, i), n(s.find(".item-grid"), "product"), t.event.trigger({ type: "newProductsAddedToPageEvent" }) })) } }), t(".spc-products").on("change", ".mobile-navigation select", function () { var a = t(this); a.closest(".spc-products").find('.navigation .tab[data-tabId="' + a.val() + '"]').click() }), t(".spc-categories").on("click", ".navigation .tab", function () {
            var a = t(this), e = parseInt(a.attr("data-tabId")) || 0, o = a.closest(".spc-categories"), i = parseInt(o.attr("data-categoryGroupId")) || 0, s = o.find('.category-products .product-grid[data-tabId="' + e + '"]'); a.is("[notLoaded]") ? (a.removeAttr("notLoaded"), o.find(".loading-overlay").show(),
                t.ajax({ url: o.attr("data-getItemProductsUrl"), type: "POST", data: { id: e, categoryId: i } }).done(function (e) { s.children(".item-grid").html(e), a.addClass("active").siblings(".tab").removeClass("active"), s.addClass("active").siblings(".product-grid").removeClass("active"), l(s, o), n(s.find(".item-grid"), "category"), t.event.trigger({ type: "newProductsAddedToPageEvent" }) })) : (a.addClass("active").siblings(".tab").removeClass("active"), s.addClass("active").siblings(".product-grid").removeClass("active")), o.find('.category-mobile-navigation-select option[value="' + e + '"]').attr("selected", "selected")
        }), t(".spc-categories").on("change", ".mobile-navigation select", function () { var a = t(this); a.closest(".spc-categories").find('.navigation .tab[data-tabId="' + a.val() + '"]').click() }), setTimeout(c, 200), a.on("scroll.smart-products", c)
    })
}(jQuery);